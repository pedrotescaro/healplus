<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Heal - Moderno</title>
  <link rel="icon" type="image/png" href="assets/imgs/Logo_Heal4.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200;300;400;500;600;700;800;900;1000&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Nunito:wght@200;300;400;500;600;700;800;900;1000&family=Roboto:wght@300;400;500;700&display=swap");

    /* Forçar modo escuro por padrão */
    body {
      background: var(--bg-body) !important;
      color: var(--primary-color) !important;
    }

    body * {
      color: inherit;
    }

    :root {
      --bg-body: linear-gradient(135deg, #e0e7ff 0%, #f8fafc 100%);
      --primary-color: #222;
      --primary-hover-color: #444;
      --scrollbar-color: rgba(37, 99, 235, 0.4);
      --card-bg-color: #fff;
      --pop-bg-color: rgba(255, 255, 255, 0.95);
      --star-color: #2563eb;
      --border-color: #e0e7ff;
      --shadow-color: rgba(37, 99, 235, 0.1);
      --accent-color: #2563eb;
      --button-gradient: linear-gradient(90deg, #2563eb 0%, #60a5fa 100%);
      --button-hover-gradient: linear-gradient(90deg, #1d4ed8 0%, #3b82f6 100%);
      --section-bg: #f3f6fd;
      --text-primary: #2563eb;
      --text-secondary: #444;
      --success-color: #22c55e;
      --warning-color: #e67e22;
      --danger-color: #ef4444;
    }

    .darkmode {
      --bg-body: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      --primary-color: #e2e8f0;
      --primary-hover-color: #cbd5e1;
      --scrollbar-color: rgba(37, 99, 235, 0.4);
      --card-bg-color: #1e293b;
      --pop-bg-color: rgba(30, 41, 59, 0.95);
      --star-color: #60a5fa;
      --border-color: #334155;
      --shadow-color: rgba(0, 0, 0, 0.3);
      --accent-color: #60a5fa;
      --button-gradient: linear-gradient(90deg, #1e40af 0%, #3b82f6 100%);
      --button-hover-gradient: linear-gradient(90deg, #1d4ed8 0%, #60a5fa 100%);
      --section-bg: #16213a;
      --text-primary: #60a5fa;
      --text-secondary: #cbd5e1;
      --success-color: #22c55e;
      --warning-color: #f59e0b;
      --danger-color: #ef4444;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    * {
      padding: 0;
      margin: 0;
      font-family: "Nunito", sans-serif;
    }

    nav {
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -o-user-select: none;
    }

    ul,
    ul li {
      outline: 0;
      list-style: none;
    }

    ul li a {
      text-decoration: none;
    }

    img {
      width: 100%;
      user-select: none;
      pointer-events: none;
    }

    h1 {
      font-size: clamp(1rem, 4vw, 1.2rem);
    }

    h2 {
      font-size: clamp(0.9rem, 4vw, 1rem);
    }

    body {
      position: relative;
      background: var(--bg-body);
      overflow: hidden;
      color: var(--primary-color);
    }

    /* Garantir que o modo escuro seja aplicado */
    body.darkmode {
      background: var(--bg-body) !important;
      color: var(--primary-color) !important;
    }

    body.darkmode * {
      color: inherit;
    }

    /* MAIN MENU */

    .main-menu {
      position: fixed;
      top: 0;
      left: 0;
      width: 180px;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      border-right: 1.5px solid #334155 !important;
      padding: 12px 0 10px;
      overflow: hidden;
      font-family: inherit;
      background: #16213A !important;
      color: var(--primary-color) !important;
      transition: none !important;
    }

    .user-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      background: transparent !important;
      color: var(--primary-color) !important;
    }

    .user-info img {
      max-width: 160px;
      aspect-ratio: 1/1;
      object-fit: cover;
      border-radius: 50%;
      padding: 20px;
    }

    .user-info p {
      color: #000000;
      font-size: clamp(0.8rem, 3vw, 1rem);
      font-weight: 500;
      text-align: center;
      line-height: 1.3;
      margin: -15px 0 30px;
    }

    body.darkmode .user-info p {
      color: #e2e8f0;
    }

    .nav-item {
      display: block;
    }

    .nav-item a {
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary-color);
      font-size: 1rem;
      padding: 12px 0;
      margin: 0 8px;
      border-radius: 5px;
      background: transparent !important;
      color: var(--primary-color) !important;
      transition: background 0.3s, color 0.3s;
    }

    .nav-item.active a {
      background: rgba(106, 109, 155, 0.08) !important;
      color: var(--accent-color) !important;
      text-decoration: none;
      box-shadow: 0px 1px 4px var(--shadow-color);
    }

    .nav-icon {
      width: 40px;
      height: 20px;
      font-size: 1.1rem;
    }

    .nav-text {
      display: block;
      width: 70px;
      height: 20px;
      letter-spacing: 0;
    }

    /* CONTENT */

    .content {
      position: absolute;
      top: 0;
      left: 180px;
      right: 0;
      min-height: 100vh;
      display: grid;
      grid-template-columns: 75% 25%;
      background: #1E293B !important;
      color: var(--primary-color) !important;
      min-height: 100vh;
      box-shadow: none !important;
      border: none !important;
    }

    .card {
      background-color: var(--card-bg-color);
      border-radius: 8px;
      border: 2px solid var(--border-color);
      box-shadow: 0px 4px 5px 0px var(--shadow-color),
        0px 1px 8px 0px var(--shadow-color), 0px 2px 4px -1px var(--shadow-color);
    }

    /* LEFT CONTENT */

    .left-content {
      padding: 25px 20px 40px;
      color: var(--primary-color);
      height: 100vh;
      overflow: auto;
      background: var(--section-bg) !important;
    }

    /* SEARCH */

    .search-box {
      position: relative;
      display: flex;
    }

    .search-box input {
      width: 80%;
      height: 40px;
      background: var(--card-bg-color);
      color: var(--primary-color);
      outline: 2px solid var(--border-color);
      border: 0;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      letter-spacing: 0.6px;
      padding: 8px 30px 8px 15px;
      margin: 0 auto;
    }

    .search-box input[type="text"]::placeholder {
      color: var(--primary-color);
      opacity: 0.5;
      font-weight: 400;
    }

    .search-box i {
      position: absolute;
      right: 11%;
      top: 25%;
      font-size: 1.3rem;
      color: var(--primary-color);
      cursor: pointer;
    }

    /* HEADER */

    .header {
      margin: 0 auto;
      width: 100%;
    }

    .header-mobile,
    .header-tablet {
      display: none;
    }

    .header-desktop {
      display: block;
    }

    /* UPCOMING EVENTS */

    .upcoming-events h1 {
      margin: 16px 0 10px;
      color: var(--text-primary);
      font-weight: 700;
    }

    .event-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 20px;
      padding: 14px 0 20px;
    }

    .event-card {
      display: grid;
      grid-auto-flow: dense;
      grid-template-rows: 2fr 0.8fr 0.5fr;
      padding: 8px;
    }

    /* Event Header */

    .event-header {
      position: relative;
      height: 180px;
      margin-bottom: 8px;
    }

    .event-header img {
      position: relative;
      inset: 0;
      width: 100%;
      height: 180px;
      border-radius: 6px;
      border: 2px solid rgba(125, 125, 137, 0.5);
      object-fit: cover;
    }

    .event-header p {
      position: absolute;
      right: 4px;
      bottom: 4px;
      font-size: 0.8rem;
      color: rgb(240, 248, 255);
      background-color: rgba(17, 16, 45, 0.6);
      padding: 4px 6px;
      border-radius: 3px;
      box-shadow: 0 8px 20px rgba(74, 72, 72, 0.1);
    }

    .bx-heart,
    .bxs-heart {
      position: absolute;
      right: 10px;
      top: 10px;
      font-size: 1.4rem;
      color: rgb(240, 248, 255);
      background-color: rgba(17, 16, 45, 0.6);
      padding: 4px;
      border-radius: 50%;
      box-shadow: 0 8px 20px rgba(74, 72, 72, 0.1);
      cursor: pointer;
    }

    .bounce-in {
      animation: pulse 0.8s 1 ease-in-out alternate;
    }

    @keyframes pulse {
      0%,
      100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.2);
      }
    }

    /* Event Content */

    .event-content {
      display: grid;
      grid-auto-flow: dense;
      grid-template-rows: 2fr 1fr;
      padding: 6px 6px 12px;
    }

    .event-content h2 {
      margin-bottom: 6px;
      line-height: 1.3;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
      color: var(--text-primary);
      font-weight: 700;

      @supports (-webkit-line-clamp: 2) {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: initial;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
      }
    }

    .event-content p {
      font-size: clamp(0.8rem, 4vw, 0.9rem);
      opacity: 0.8;
      color: var(--text-secondary);
    }

    /* Event Footer */

    .event-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 4px;
    }

    .event-footer p {
      color: rgb(240, 248, 255);
      font-size: clamp(0.6rem, 3vw, 0.8rem);
      font-weight: 600;
      letter-spacing: 1px;
      padding: 6px 10px;
      border-radius: 50px;
    }

    .btn-group {
      display: inline-flex;
    }

    .event-footer button {
      background: var(--button-gradient);
      color: #fff;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
    }

    .event-footer button:hover {
      background: var(--button-hover-gradient);
      transform: translateY(-1px);
    }

    .event-footer button:last-child {
      background: var(--danger-color);
    }

    .event-footer button:last-child:hover {
      background: #dc2626;
    }

    /* Share Button Popup */

    .share {
      position: relative;
    }

    .popup {
      position: absolute;
      display: flex;
      justify-content: space-around;
      align-items: center;
      top: -45px;
      left: -15px;
      min-width: 70px;
      padding: 5px 8px 3px;
      border-radius: 10px;
      background-color: var(--pop-bg-color);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
      opacity: 0;
      transform: translateY(50px) scale(0);
      -webkit-transform: translateY(50px) scale(0);
      transition: 0.4s ease-in-out;
      -webkit-transition: 0.4s ease-in-out;
      cursor: auto;
    }

    .popup.active {
      opacity: 1;
      transform: translateY(0) scale(1);
      -webkit-transform: translateY(0) scale(1);
    }

    .popup::after {
      content: "";
      position: absolute;
      height: 10px;
      width: 20px;
      background-color: var(--pop-bg-color);
      clip-path: polygon(100% 0, 0 0, 50% 100%);
      -webkit-clip-path: polygon(100% 0, 0 0, 50% 100%);
      transform: translate(0px, 20px);
      -webkit-transform: translate(0px, 20px);
    }

    .popup li a i {
      font-size: 1.4rem;
    }

    /* REVIEWS */

    .reviews h1 {
      margin: 60px 0 20px;
      color: var(--text-primary);
      font-weight: 700;
    }

    .review-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 30px;
    }

    .review-card {
      padding: 20px;
    }

    .review-card h2 {
      margin-bottom: 8px;
    }

    .review-card p {
      margin-top: 10px;
      line-height: 1.5;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;

      @supports (-webkit-line-clamp: 3) {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: initial;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
      }
    }

    .ratings i {
      color: var(--star-color);
      font-size: 1.15rem;
    }

    /* RIGHT CONTENT */

    .right-content {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      border-left: 1.5px solid #334155 !important;
      padding: 28px 18px 28px 18px;
      color: var(--primary-color);
      height: 100vh;
      overflow-y: auto;
      background: var(--section-bg);
      gap: 28px;
      box-sizing: border-box;
    }
    .analytics,
    .contacts {
      width: 100%;
      margin-bottom: 0;
      background: var(--card-bg-color) !important;
      border-radius: 12px;
      box-shadow: 0 4px 24px 0 rgba(22, 33, 58, 0.18), 0 1.5px 8px 0 rgba(22, 33, 58, 0.10);
      padding: 22px 18px 22px 18px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      box-sizing: border-box;
    }
    @media (max-width: 900px) {
      .right-content {
        padding: 18px 4px;
        gap: 18px;
      }
      .analytics,
      .contacts {
        padding: 14px 4px;
        border-radius: 8px;
        gap: 12px;
      }
    }

    .contacts-feed {
      max-width: 100%;
      overflow-x: hidden;
    }

    .contact-feed-item {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      border-bottom: 1px solid var(--border-color, #333);
      padding-bottom: 12px;
    }

    .contact-feed-item:last-child {
      border-bottom: none;
    }

    .contact-feed-item img {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      object-fit: cover;
      margin-top: 2px;
    }

    .contact-feed-name {
      font-weight: 700;
      color: #2563eb;
    }
    body.darkmode .contact-feed-name {
      color: #60a5fa;
    }

    .contact-feed-link {
      color: #ffb300;
      font-weight: 700;
      text-decoration: none;
      margin-left: 2px;
    }

    .contact-feed-link:hover {
      text-decoration: underline;
    }

    .contact-feed-time {
      font-size: 0.85em;
      color: #bdbdbd;
      margin-top: 2px;
    }

    /* INTERACTION CONTROL */

    .interaction-control-mobile {
      display: none;
    }

    .interaction-control {
      display: flex;
      margin-bottom: 15px;
    }

    .interactions {
      justify-content: flex-end;
      align-items: center;
      gap: 25px;
    }

    .interactions i {
      font-size: 1.25rem;
      color: var(--primary-color);
      user-select: none;
    }

    .notified {
      position: relative;
    }

    .notified::after {
      content: "";
      position: absolute;
      top: -3px;
      right: -1px;
      background-color: rgb(211, 17, 43);
      width: 10px;
      aspect-ratio: 1/1;
      border-radius: 50%;
    }

    .fa-envelope::after {
      right: -4px;
      background-color: rgb(48, 153, 36);
    }

    /* Light/Dark Mode */

    .mode-icon i {
      color: var(--primary-color);
      transform: translateY(2px);
      transition: all 0.2s linear;
      cursor: pointer;
    }

    .mode-icon i:hover {
      color: var(--primary-hover-color);
    }

    .hidden {
      display: none;
    }

    /* ANALYTICS */

    .analytics h1 {
      margin-bottom: 24px;
      color: var(--text-primary);
      font-weight: 700;
    }

    /* Total Events */

    .total-events {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      justify-content: center;
    }

    .event-number.card {
      flex: 1 1 160px;
      min-width: 140px;
      max-width: 220px;
      box-sizing: border-box;
      margin-bottom: 10px;
    }
    .event-number.card div[style*='font-size:2.2em'] {
      font-size: 2em !important;
      word-break: break-word;
    }
    @media (max-width: 600px) {
      .total-events {
        flex-direction: column;
        gap: 10px;
      }
      .event-number.card {
        max-width: 100%;
        min-width: 0;
      }
    }

    /* Estilos específicos para modo escuro */
    .darkmode .card {
      background-color: var(--card-bg-color);
      border-color: var(--border-color);
      box-shadow: 0px 4px 15px 0px rgba(0, 0, 0, 0.4);
    }

    .darkmode .event-footer button {
      background: var(--button-gradient);
      color: #fff;
      border: 1px solid var(--border-color);
    }

    .darkmode .event-footer button:hover {
      background: var(--button-hover-gradient);
      border-color: var(--accent-color);
    }

    .darkmode .event-footer button:last-child {
      background: var(--danger-color);
      border-color: var(--danger-color);
    }

    .darkmode .event-footer button:last-child:hover {
      background: #dc2626;
      border-color: #dc2626;
    }

    .darkmode .upcoming-events h1,
    .darkmode .reviews h1,
    .darkmode .analytics h1 {
      color: var(--text-primary);
    }

    .darkmode .event-content h2 {
      color: var(--text-primary);
    }

    .darkmode .event-content p {
      color: var(--text-secondary);
    }

    .darkmode .search-box input {
      background-color: var(--card-bg-color);
      color: var(--primary-color);
      border-color: var(--border-color);
    }

    .darkmode .search-box input::placeholder {
      color: var(--text-secondary);
    }

    /* Regras específicas para modo escuro - elementos principais */
    .darkmode .main-menu {
      background-color: #16213A !important;
      border-right: 1.5px solid #334155 !important;
    }

    .darkmode .content {
      background-color: #1E293B !important;
      color: #e2e8f0 !important;
    }

    .darkmode .left-content {
      background-color: var(--bg-body);
      color: var(--primary-color);
    }

    .darkmode .right-content {
      background-color: var(--bg-body);
      color: var(--primary-color);
      border-left: 1.5px solid #334155 !important;
    }

    .darkmode .event-number {
      background-color: var(--card-bg-color);
      border-color: var(--border-color);
    }

    .darkmode .event-number h2 {
      color: var(--text-primary);
    }

    .darkmode .event-number p {
      color: var(--primary-color);
    }

    /* Forçar modo escuro nos elementos principais */
    .card {
      background-color: #1e293b !important;
      border-color: #334155 !important;
      color: #e2e8f0 !important;
    }

    .main-menu {
      background: #16213A !important;
      color: var(--primary-color) !important;
      border-right: 1.5px solid #334155 !important;
      box-shadow: none !important;
      transition: none !important;
    }

    .left-content,
    .right-content {
      background-color: transparent !important;
      color: #e2e8f0 !important;
    }

    h1, h2 {
      color: #60a5fa !important;
    }

    p {
      color: #cbd5e1 !important;
    }

    .message-box {
      position: fixed;
      top: 24px;
      left: 50%;
      transform: translateX(-50%);
      min-width: 260px;
      max-width: 90vw;
      padding: 14px 32px;
      border-radius: 8px;
      font-size: 1.08em;
      font-weight: 600;
      color: #fff;
      background: #2563eb;
      box-shadow: 0 4px 18px rgba(37,99,235,0.13);
      opacity: 0;
      z-index: 9999;
      transition: opacity 0.3s;
    }
    .message-box.success {
      background: linear-gradient(90deg, #22c55e 70%, #4ade80 100%);
    }
    .message-box.info {
      background: linear-gradient(90deg, #2563eb 70%, #60a5fa 100%);
    }
    .message-box.error {
      background: linear-gradient(90deg, #ef4444 70%, #f87171 100%);
    }

    .contacts-container {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .contact-status {
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 10px;
    }
    .contact-status:last-child {
      border-bottom: none;
    }
    .contact-activity {
      display: flex;
      align-items: center;
      gap: 14px;
    }
    .contact-activity img {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
    }
    .contact-activity > div {
      display: flex;
      align-items: center;
      gap: 4px;
      flex-wrap: wrap;
    }
    .contact-name {
      font-weight: 700;
      color: var(--primary-color);
    }
    .contact-role {
      font-size: 0.97em;
      color: var(--text-secondary);
    }
    .contact-dot {
      font-size: 0.95em;
      font-weight: 700;
      margin-left: 2px;
    }
    .contact-dot.online {
      color: #22c55e;
    }
    .contact-dot.away {
      color: #f59e0b;
    }
    .contact-activity small {
      font-size: 0.8em;
      opacity: 0.5;
      margin-left: auto;
    }
    .left-content::-webkit-scrollbar,
    .right-content::-webkit-scrollbar,
    body::-webkit-scrollbar {
      width: 8px;
    }
    .left-content::-webkit-scrollbar-track,
    .right-content::-webkit-scrollbar-track,
    body::-webkit-scrollbar-track {
      border-radius: 0;
    }
    .left-content::-webkit-scrollbar-thumb,
    .right-content::-webkit-scrollbar-thumb,
    body::-webkit-scrollbar-thumb {
      background-color: var(--scrollbar-color);
      border-radius: 40px;
    }

    .contacts h1 {
      margin: 20px 0 16px 0;
      font-size: 1.1em;
      font-weight: 700;
      background: #ffb300;
      color: #22223b;
      display: inline-block;
      padding: 2px 10px;
      border-radius: 3px;
      letter-spacing: 0.5px;
    }
    .contacts-feed {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    .contact-feed-item {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      border-bottom: 1px solid var(--border-color, #333);
      padding-bottom: 12px;
    }
    .contact-feed-item:last-child {
      border-bottom: none;
    }
    .contact-feed-item img {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      object-fit: cover;
      margin-top: 2px;
    }
    .contact-feed-name {
      font-weight: 700;
      color: #2563eb;
    }
    body.darkmode .contact-feed-name {
      color: #60a5fa;
    }
    .contact-feed-link {
      color: #ffb300;
      font-weight: 700;
      text-decoration: none;
      margin-left: 2px;
    }
    .contact-feed-link:hover {
      text-decoration: underline;
    }
    .contact-feed-time {
      font-size: 0.85em;
      color: #bdbdbd;
      margin-top: 2px;
    }
    .chart-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 8px 16px;
      justify-content: center;
      align-items: center;
      margin-top: 12px;
      width: 100%;
      overflow-x: auto;
      white-space: normal;
    }
    .chart-legend span {
      display: flex;
      align-items: center;
      font-size: 0.97em;
      min-width: 110px;
      margin-bottom: 4px;
      white-space: nowrap;
    }
    .chart-legend .legend-color {
      width: 16px;
      height: 16px;
      border-radius: 4px;
      margin-right: 6px;
      display: inline-block;
    }
    @media (max-width: 600px) {
      .chart-legend {
        gap: 6px 8px;
      }
      .chart-legend span {
        min-width: 90px;
        font-size: 0.93em;
      }
    }

    body:not(.darkmode) .analytics,
    body:not(.darkmode) .card,
    body:not(.darkmode) .dashboard-section {
      background: #fff !important;
      color: #222 !important;
      box-shadow: 0 2px 12px rgba(37, 99, 235, 0.07);
    }
    body:not(.darkmode) h1,
    body:not(.darkmode) h2,
    body:not(.darkmode) h3 {
      color: #2563eb !important;
    }
    body.darkmode .analytics,
    body.darkmode .card,
    body.darkmode .dashboard-section {
      background: #18122b !important;
      color: #e2e8f0 !important;
      box-shadow: 0 2px 12px rgba(0,0,0,0.2);
    }
    body.darkmode h1,
    body.darkmode h2,
    body.darkmode h3 {
      color: #60a5fa !important;
    }

    body:not(.darkmode) .event-number div[style*='color:#fff'] {
      color: #2563eb !important;
    }
    body:not(.darkmode) .event-number div[style*='color:#fff;'] {
      color: #2563eb !important;
    }
    body:not(.darkmode) .event-number div[style*='color: #fff'] {
      color: #2563eb !important;
    }
    body:not(.darkmode) .event-number div[style*='color: #fff;'] {
      color: #2563eb !important;
    }

    .chart-pct-card {
      background: #fff;
      border-radius: 8px;
      padding: 7px 16px;
      font-size: 0.98em;
      font-weight: 600;
      margin-bottom: 4px;
      box-shadow: 0 2px 8px rgba(37,99,235,0.08);
      border: 1.5px solid #e0e7ff;
    }
    body.darkmode .chart-pct-card {
      background: #1e1b2e;
      border: none;
      box-shadow: none;
    }

    .chart-percentages {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      align-items: center;
      list-style: none;
      margin: 10px 0 0 0;
      padding: 0;
    }
    .chart-percentages li {
      background: #fff;
      border: 1.5px solid #e0e7ff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(37,99,235,0.08);
      padding: 6px 14px;
      font-size: 0.98em;
      font-weight: 600;
      display: flex;
      align-items: center;
      min-width: 120px;
      justify-content: center;
      transition: background 0.2s, color 0.2s;
    }
    body.darkmode .chart-percentages li {
      background: #1e1b2e;
      color: #fff;
      border: none;
      box-shadow: none;
    }
    .chart-percentages .abertas { color: #e48e2c; }
    .chart-percentages .cicatrizadas { color: #22c55e; }
    .chart-percentages .infectadas { color: #e91e63; }
    .chart-percentages .tratamento { color: #2563eb; }

    body:not(.darkmode) .main-menu,
    body:not(.darkmode) .content {
      background: #fff !important;
      color: #222 !important;
      min-height: 100vh;
      box-shadow: none !important;
      border: none !important;
    }
    body.darkmode .main-menu,
    body.darkmode .content {
      background: #16213A !important;
      color: #e2e8f0 !important;
      min-height: 100vh;
      box-shadow: none !important;
      border: none !important;
    }

    body:not(.darkmode) .main-menu {
      border-right: 1.5px solid #334155 !important;
    }
    body:not(.darkmode) .right-content {
      border-left: 1.5px solid #334155 !important;
    }
    body.darkmode .main-menu {
      border-right: 1.5px solid #334155 !important;
    }
    body.darkmode .right-content {
      border-left: 1.5px solid #334155 !important;
    }

    /* Mensagens de erro ou vazio na right-content */
    body:not(.darkmode) .right-content > p,
    body:not(.darkmode) .right-content .empty-message,
    body:not(.darkmode) .right-content .error-message {
      color: #000 !important;
    }
    body.darkmode .right-content > p,
    body.darkmode .right-content .empty-message,
    body.darkmode .right-content .error-message {
      color: #e2e8f0 !important;
    }

    body.darkmode .analytics,
    body.darkmode .contacts {
      background: #16213A !important;
    }
    body:not(.darkmode) .analytics,
    body:not(.darkmode) .contacts {
      background: #fff !important;
      color: #22223b !important;
      box-shadow: 0 4px 24px 0 rgba(22, 33, 58, 0.10), 0 1.5px 8px 0 rgba(22, 33, 58, 0.06);
    }
    body:not(.darkmode) .contacts-feed {
      color: #22223b;
    }
    body:not(.darkmode) .contact-feed-item {
      border-bottom: 1px solid #e0e7ff;
      background: transparent;
    }
    body:not(.darkmode) .contact-feed-item img {
      border: 2px solid #e0e7ff;
    }
    body:not(.darkmode) .contact-feed-name {
      color: #2563eb;
      font-weight: 700;
    }
    body:not(.darkmode) .contact-feed-link {
      color: #ffb300;
      font-weight: 700;
      text-decoration: none;
      margin-left: 2px;
    }
    body:not(.darkmode) .contact-feed-link:hover {
      text-decoration: underline;
    }
    body:not(.darkmode) .contact-feed-time {
      font-size: 0.85em;
      color: #bdbdbd;
      margin-top: 2px;
    }
  </style>
</head>
<body class="darkmode">
  <nav class="main-menu">
    <div>
      <div class="user-info">
        <img src="assets/imgs/Logo_Heal4.png" alt="user" />
        <p>Profissional da Saúde</p>
      </div>
      <ul>
        <li class="nav-item active">
          <a href="#">
            <i class="fa fa-house nav-icon"></i>
            <span class="nav-text">Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="agenda.html">
            <i class="fa fa-calendar nav-icon"></i>
            <span class="nav-text">Agenda</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="chat.html">
            <i class="fa fa-comment nav-icon"></i>
            <span class="nav-text">Chat</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="profile.html">
            <i class="fa fa-user-circle nav-icon"></i>
            <span class="nav-text">Perfil</span>
          </a>
        </li>
      </ul>
    </div>
    <ul>
      <li class="nav-item">
        <a href="#">
          <i class="fa fa-gear nav-icon"></i>
          <span class="nav-text">Configurações</span>
        </a>
      </li>
      <li class="nav-item">
        <a href="#">
          <i class="fa fa-right-from-bracket nav-icon"></i>
          <span class="nav-text">Sair</span>
        </a>
      </li>
    </ul>
  </nav>
  <section class="content">
    <div class="left-content">
      <div class="search-and-check">
        <form class="search-box">
          <input type="text" placeholder="Pesquisar anamnese..." id="search-anamnese" />
          <i class="fa fa-search"></i>
        </form>
        <div class="interaction-control-mobile interactions">
          <i class="fa-regular fa-envelope notified"></i>
          <i class="fa-regular fa-bell notified"></i>
          <div class="toggle" onclick="switchTheme()">
            <div class="mode-icon moon">
              <i class="fa-solid fa-sun"></i>
            </div>
            <div class="mode-icon sun hidden">
              <i class="fa-solid fa-moon"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="header" style="display: flex; align-items: center; gap: 24px; padding: 24px 0 12px 0;">
        <div class="profile-avatar" style="position:relative; width:64px; height:64px;">
          <img id="dashboard-profile-img" src="" alt="Foto de perfil" style="width: 64px; height: 64px; border-radius: 50%; object-fit: cover; box-shadow: 0 2px 8px rgba(37,99,235,0.15); display:none;">
          <i id="dashboard-profile-placeholder" class="fas fa-user-circle" style="font-size:64px; color:#60a5fa; position:absolute; left:0; top:0; display:block;"></i>
        </div>
        <div>
          <h2 id="dashboard-profile-name" style="margin: 0; color: var(--text-primary); font-size: 1.6em;">Olá, Profissional!</h2>
          <span id="dashboard-profile-email" style="color: var(--text-secondary); font-size: 1em;">Bem-vindo ao seu painel</span>
          <div id="dashboard-profile-details" style="display: flex; flex-wrap: wrap; gap: 18px 32px; margin-top: 8px; font-size: 0.98em; color: var(--text-secondary);">
            <span id="dashboard-profile-phone"></span>
            <span id="dashboard-profile-profession"></span>
            <span id="dashboard-profile-coren"></span>
            <span id="dashboard-profile-marital-status"></span>
            <span id="dashboard-profile-dob"></span>
            <span id="dashboard-profile-last-anamnese"></span>
          </div>
        </div>
      </div>
      <div class="upcoming-events">
        <h1>Anamneses Cadastradas</h1>
        <div class="event-container" id="anamneses-list">
          <!-- Lista dinâmica via JS -->
        </div>
      </div>
      <div class="reviews">
        <h1>Últimas Ações</h1>
        <div class="review-container" id="ultimas-acoes">
          <!-- Pode ser preenchido com logs ou ações recentes -->
        </div>
      </div>
    </div>
    <div class="right-content">
      <div class="interaction-control interactions" style="display: flex; align-items: center; gap: 16px;">
        <i class="fa-regular fa-envelope notified"></i>
        <i class="fa-regular fa-bell notified"></i>
        <div class="toggle" onclick="switchTheme()">
          <div class="mode-icon moon">
            <i class="fa-solid fa-sun"></i>
          </div>
          <div class="mode-icon sun hidden">
            <i class="fa-solid fa-moon"></i>
          </div>
        </div>
      </div>
      <div class="analytics">
        <h1>Estatísticas</h1>
        <div class="total-events">
          <div class="event-number card">
            <div style="display:flex; align-items:center; justify-content:space-between;">
              <div>
                <div style="font-size:2.2em; color:#60a5fa; font-weight:700;">120</div>
                <div style="font-size:1em;">Total de Anamneses</div>
              </div>
              <i class="fa-solid fa-clipboard-list" style="font-size:2.2em; color:#60a5fa;"></i>
            </div>
          </div>
          <div class="event-number card">
            <div style="display:flex; align-items:center; justify-content:space-between;">
              <div>
                <div style="font-size:2.2em; color:#fbbf24; font-weight:700;">18</div>
                <div style="font-size:1em;">Feridas Abertas</div>
              </div>
              <i class="fa-solid fa-heart-crack" style="font-size:2.2em; color:#fbbf24;"></i>
            </div>
          </div>
        </div>
        <div class="chart" id="doughnut-chart" style="margin-top:22px;">
          <h2 style="margin-bottom:10px;">Distribuição das Feridas</h2>
          <div class="chart-legend">
            <span><span class="legend-color" style="background:#fbbf24"></span>Abertas</span>
            <span><span class="legend-color" style="background:#22c55e"></span>Cicatrizadas</span>
            <span><span class="legend-color" style="background:#f472b6"></span>Infectadas</span>
            <span><span class="legend-color" style="background:#60a5fa"></span>Em tratamento</span>
          </div>
          <canvas id="doughnut" width="180" height="180" style="margin:0 auto 10px auto;display:block;"></canvas>
          <ul class="chart-percentages">
            <li class="abertas">Abertas: <span class="percentage">30%</span></li>
            <li class="cicatrizadas">Cicatrizadas: <span class="percentage">45%</span></li>
            <li class="infectadas">Infectadas: <span class="percentage">10%</span></li>
            <li class="tratamento">Em tratamento: <span class="percentage">15%</span></li>
          </ul>
        </div>
        <script>
          // Gráfico donut estático adaptado para o Heal
          document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('doughnut').getContext('2d');
            new Chart(ctx, {
              type: 'doughnut',
              data: {
                labels: ['Abertas', 'Cicatrizadas', 'Infectadas', 'Em tratamento'],
                datasets: [{
                  data: [30, 45, 10, 15],
                  backgroundColor: [
                    '#fbbf24', // Abertas
                    '#22c55e', // Cicatrizadas
                    '#f472b6', // Infectadas
                    '#60a5fa'  // Em tratamento
                  ],
                  borderWidth: 2,
                  borderColor: '#18122b',
                  hoverOffset: 8
                }]
              },
              options: {
                cutout: '70%',
                plugins: {
                  legend: { display: false }
                }
              }
            });
          });
        </script>
      </div>
      <div class="contacts">
        <h1>Contatos</h1>
        <div class="contacts-feed">
          <div class="contact-feed-item">
            <img src="https://randomuser.me/api/portraits/men/44.jpg" alt="Dr. João" />
            <div>
              <span class="contact-feed-name">Dr. João</span> enviou uma mensagem
              <a href="#" class="contact-feed-link">Ver conversa</a>
              <div class="contact-feed-time">há 1 hora</div>
            </div>
          </div>
          <div class="contact-feed-item">
            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Sra. Maria" />
            <div>
              <span class="contact-feed-name">Sra. Maria</span> cadastrou nova anamnese
              <a href="#" class="contact-feed-link">Ver detalhes</a>
              <div class="contact-feed-time">há 4 horas</div>
            </div>
          </div>
          <div class="contact-feed-item">
            <img src="https://cdn-icons-png.flaticon.com/512/4712/4712035.png" alt="Assistente Virtual" />
            <div>
              <span class="contact-feed-name">Assistente Virtual</span> respondeu uma dúvida
              <a href="#" class="contact-feed-link">Ver resposta</a>
              <div class="contact-feed-time">há 2 minutos</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Inicializar tema
      initializeTheme();
      
      let storedAnamneses = [];
      function fetchAnamnesesFromAPI() {
        fetch("/site/public/api/anamnese")
          .then((response) => {
            if (!response.ok) throw new Error("Erro ao buscar dados da API");
            return response.json();
          })
          .then((data) => {
            storedAnamneses = data;
            renderAnamneses();
            renderEstatisticas();
            renderGrafico();
          })
          .catch((error) => {
            document.getElementById("anamneses-list").innerHTML = '<p style="text-align: center; color: #111827; font-size:1.1em;">Erro ao carregar dados da API.</p>';
          });
      }
      function renderAnamneses() {
        const list = document.getElementById("anamneses-list");
        list.innerHTML = "";
        if (storedAnamneses.length === 0) {
          list.innerHTML = '<p style="text-align: center; color: #111827; font-size:1.1em;">Nenhuma anamnese cadastrada ainda.</p>';
          return;
        }
        storedAnamneses.forEach((anamnese, index) => {
          const div = document.createElement("div");
          div.classList.add("card", "event-card");
          const formattedDate = anamnese.data_consulta ? new Date(anamnese.data_consulta).toLocaleDateString("pt-BR") : "N/A";
          const woundStatus = anamnese.percentual_epitelizacao_leito && parseInt(anamnese.percentual_epitelizacao_leito) >= 100 ? "Cicatrizada" : "Aberta";
          div.innerHTML = `
            <div class="event-header">
              <img src="assets/imgs/Logo_Heal4.png" alt="Paciente" />
              <p>${formattedDate}</p>
              <i class="fa fa-heart like-btn"></i>
            </div>
            <div class="event-content">
              <h2>${anamnese.nome_cliente || "Paciente sem nome"}</h2>
              <p><strong>Localização:</strong> ${anamnese.localizacao_ferida || "N/A"}</p>
              <p><strong>Etiologia:</strong> ${anamnese.etiologia_ferida || "N/A"}</p>
              <p><strong>Status:</strong> <span style="color: ${woundStatus === "Cicatrizada" ? "#22c55e" : "#e67e22"}; font-weight:600;">${woundStatus}</span></p>
            </div>
            <div class="event-footer">
              <p style="background-color: ${woundStatus === "Cicatrizada" ? "#22c55e" : "#e48e2c"}">${woundStatus}</p>
              <div class="btn-group">
                <button>Visualizar</button>
                <button>Editar</button>
                <button style="background:#ef4444;color:#fff;">Excluir</button>
              </div>
            </div>
          `;
          list.appendChild(div);
        });
      }
      function renderEstatisticas() {
        let total = storedAnamneses.length;
        let abertas = storedAnamneses.filter(a => !(a.percentual_epitelizacao_leito && parseInt(a.percentual_epitelizacao_leito) >= 100)).length;
        let cicatrizadas = total - abertas;
        document.getElementById("total-anamneses").textContent = total;
        document.getElementById("open-wounds").textContent = abertas;
        document.getElementById("closed-wounds").textContent = cicatrizadas;
      }
      function renderGrafico() {
        const abertas = storedAnamneses.filter(a => !(a.percentual_epitelizacao_leito && parseInt(a.percentual_epitelizacao_leito) >= 100)).length;
        const cicatrizadas = storedAnamneses.length - abertas;
        const chart = document.getElementById("doughnut");
        if (!chart) return;
        new Chart(chart, {
          type: "doughnut",
          data: {
            labels: ["Abertas", "Cicatrizadas"],
            datasets: [
              {
                label: "Feridas",
                data: [abertas, cicatrizadas],
                backgroundColor: ["#e48e2c", "#22c55e"],
                offset: 10,
                hoverOffset: 8,
                hoverBorderColor: "#9a999b",
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                display: true,
                labels: {
                  color: "#8b8a96",
                  font: { size: 12, weight: 600 },
                },
              },
            },
            layout: { padding: { bottom: 10 } },
          },
        });
        // Atualiza a lista
        const values = [30, 45, 10, 15]; // Substitua pelos valores reais se necessário
        const percentageSpans = document.querySelectorAll('.chart-percentages .percentage');
        percentageSpans.forEach((span, i) => {
          if (values[i] !== undefined) {
            span.textContent = values[i] + '%';
          }
        });
      }
      fetchAnamnesesFromAPI();
    });
    // TODO: Adicionar o restante do JS do pen para interações visuais (tema, like, share, etc)
    
    // Função para alternar entre tema claro e escuro
    function switchTheme() {
      const body = document.body;
      const sunIcons = document.querySelectorAll('.mode-icon.moon');
      const moonIcons = document.querySelectorAll('.mode-icon.sun');

      if (body.classList.contains('darkmode')) {
        // Mudar para modo claro
        body.classList.remove('darkmode');
        sunIcons.forEach(el => el.classList.remove('hidden'));
        moonIcons.forEach(el => el.classList.add('hidden'));
        localStorage.setItem('theme', 'light');
      } else {
        // Mudar para modo escuro
        body.classList.add('darkmode');
        sunIcons.forEach(el => el.classList.add('hidden'));
        moonIcons.forEach(el => el.classList.remove('hidden'));
        localStorage.setItem('theme', 'dark');
      }
    }
    
    function initializeTheme() {
      const savedTheme = localStorage.getItem('theme');
      const body = document.body;
      const sunIcons = document.querySelectorAll('.mode-icon.moon');
      const moonIcons = document.querySelectorAll('.mode-icon.sun');

      if (!savedTheme || savedTheme === 'dark') {
        body.classList.add('darkmode');
        sunIcons.forEach(el => el.classList.add('hidden'));
        moonIcons.forEach(el => el.classList.remove('hidden'));
      } else {
        body.classList.remove('darkmode');
        sunIcons.forEach(el => el.classList.remove('hidden'));
        moonIcons.forEach(el => el.classList.add('hidden'));
      }
    }

    // Sincronizar foto de perfil do dashboard com a escolhida no profile.html
    function atualizarFotoDashboard() {
      const img = document.getElementById('dashboard-profile-img');
      const placeholder = document.getElementById('dashboard-profile-placeholder');
      const fotoSalva = localStorage.getItem('profileImgBase64');
      if (fotoSalva) {
        img.src = fotoSalva;
        img.style.display = 'block';
        placeholder.style.display = 'none';
      } else {
        img.style.display = 'none';
        placeholder.style.display = 'block';
      }
    }
    document.addEventListener('DOMContentLoaded', atualizarFotoDashboard);

    // Preencher dados do perfil no dashboard
    function preencherPerfilDashboard() {
      <!-- Start of Selection -->
      const nomeSalvo = localStorage.getItem('nomeUsuario');
      const emailSalvo = localStorage.getItem('emailUsuario');
      const telefoneSalvo = localStorage.getItem('telefoneUsuario');
      
      const nomeElement = document.getElementById('dashboard-nome');
      const emailElement = document.getElementById('dashboard-email');
      const telefoneElement = document.getElementById('dashboard-telefone');
      
      if (nomeElement && nomeSalvo) {
        nomeElement.textContent = nomeSalvo;
      }
      if (emailElement && emailSalvo) {
        emailElement.textContent = emailSalvo;
      }
      if (telefoneElement && telefoneSalvo) {
        telefoneElement.textContent = telefoneSalvo;
      }
    }
    
    // Inicializar tema e perfil quando a página carregar
    document.addEventListener('DOMContentLoaded', function() {
      initializeTheme();
      preencherPerfilDashboard();
    });

    // Mensagem customizada igual ao profile
    function showMessageBox(message, type) {
      const messageBox = document.createElement('div');
      messageBox.classList.add('message-box', type);
      messageBox.textContent = message;
      document.body.appendChild(messageBox);
      setTimeout(() => { messageBox.style.opacity = 1; }, 10);
      setTimeout(() => {
        messageBox.style.opacity = 0;
        messageBox.addEventListener('transitionend', () => messageBox.remove());
      }, 3000);
    }
    // Listener para o botão Sair do menu lateral
    document.addEventListener('DOMContentLoaded', function() {
      const sairBtn = document.querySelector('.nav-item a[href="#"] .fa-right-from-bracket')?.closest('a');
      if (sairBtn) {
        sairBtn.addEventListener('click', function(e) {
          e.preventDefault();
          // Limpar dados do usuário se necessário
          localStorage.removeItem('currentUserProfile');
          localStorage.removeItem('anamneses');
          showMessageBox('Sessão encerrada com sucesso!', 'success');
          setTimeout(() => {
            window.location.href = 'index.html';
          }, 1200);
        });
      }
    });
  </script>
</body>
</html>